[gd_scene load_steps=35 format=3 uid="uid://c5151n8v6645w"]

[ext_resource type="Script" uid="uid://h531hpff7fyb" path="res://intermission_background.gd" id="1_3b4nm"]
[ext_resource type="Script" uid="uid://bsste0045nkbd" path="res://game/UI/intermission/intermission_menu.gd" id="1_yvdn4"]
[ext_resource type="Theme" uid="uid://3cudps0p8v2w" path="res://game/UI/intermission/button_theme.tres" id="2_0i6aa"]
[ext_resource type="Shader" uid="uid://s4clk6hl5ixd" path="res://game/UI/intermission/buttonshader.gdshader" id="2_d7pyx"]
[ext_resource type="Shader" uid="uid://b66latbe5eymd" path="res://game/UI/intermission/vignette.gdshader" id="3_x37ni"]
[ext_resource type="Script" uid="uid://c75u2713r4bxx" path="res://game/UI/main_menu/canvas_layer_tilt.gd" id="4_nel6a"]
[ext_resource type="FastNoiseLite" uid="uid://bg65nvcq4fe05" path="res://game/UI/main_menu/canvas_layer_tilt_noise.tres" id="5_d21pq"]
[ext_resource type="Script" uid="uid://3scsxn16mp8e" path="res://game/UI/intermission/mod_select.gd" id="5_vmbcd"]
[ext_resource type="Script" uid="uid://bkeoml7x3rkuu" path="res://game/modifier/Modifier.gd" id="6_dt5tg"]
[ext_resource type="PackedScene" uid="uid://cqlucyg0ogdps" path="res://game/enemies/echo/echo.tscn" id="7_gldry"]
[ext_resource type="Script" uid="uid://b5htysbr1cbiw" path="res://game/enemyspawning/enemyType.gd" id="7_s5603"]
[ext_resource type="Shader" uid="uid://cuejqmse7fsm1" path="res://game/UI/intermission/dissolve.gdshader" id="9_dpipn"]
[ext_resource type="PackedScene" uid="uid://dhrvl7mrmdym7" path="res://game/enemies/doppleganger/doppleganger.tscn" id="9_gldry"]
[ext_resource type="Script" uid="uid://br7ayqjve2drn" path="res://game/modifier/modifiers/add_dopple.gd" id="10_diied"]
[ext_resource type="PackedScene" uid="uid://bx56mhuthy1oe" path="res://game/assets/terrain/laserthing.tscn" id="11_diied"]
[ext_resource type="PackedScene" uid="uid://bba4cdnn4qmm6" path="res://game/enemies/line_enemy/line_enemy.tscn" id="15_fbdnw"]
[ext_resource type="Theme" uid="uid://c6mssg2ngmqpk" path="res://game/game_ui_theme.tres" id="16_4jr5q"]
[ext_resource type="FontFile" uid="uid://d3xv2jvjnv25p" path="res://game/assets/TinyUnicode.ttf" id="17_fbdnw"]
[ext_resource type="PackedScene" uid="uid://io2xm657xi7l" path="res://game/UI/timeline_panel/timeline.tscn" id="19_kfo7d"]

[sub_resource type="Gradient" id="Gradient_0i6aa"]
offsets = PackedFloat32Array(0.38746437, 0.65099716)
colors = PackedColorArray(0, 0, 0, 1, 0.52, 0, 0, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_x37ni"]
frequency = 0.0332
offset = Vector3(0, 0, 1062481.2)
fractal_type = 3
fractal_lacunarity = 2.29
fractal_gain = 0.66
domain_warp_type = 2
domain_warp_fractal_type = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_d7pyx"]
width = 426
height = 240
noise = SubResource("FastNoiseLite_x37ni")
color_ramp = SubResource("Gradient_0i6aa")
in_3d_space = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1heoq"]
shader = ExtResource("2_d7pyx")
shader_parameter/normal_offset = 1.5
shader_parameter/time_influence = 2.5
shader_parameter/y_div = 5.6
shader_parameter/opacity = 1.0
shader_parameter/seed = 0.0
shader_parameter/tint_color = Color(1, 1, 1, 1)

[sub_resource type="Resource" id="Resource_7pqxr"]
script = ExtResource("7_s5603")
scene = ExtResource("7_gldry")
weight = 0.35
metadata/_custom_type_script = "uid://b5htysbr1cbiw"

[sub_resource type="Resource" id="Resource_dpipn"]
script = ExtResource("6_dt5tg")
display_name = "Add Echo"
max_stacks = 3
score_multiplier = 0.4
enemy_to_spawn = SubResource("Resource_7pqxr")
metadata/_custom_type_script = "uid://bkeoml7x3rkuu"

[sub_resource type="Resource" id="Resource_nel6a"]
script = ExtResource("10_diied")
doppleganger_scene = ExtResource("9_gldry")
display_name = "Add Doppel"
stackable = false
score_multiplier = 0.8
metadata/_custom_type_script = "uid://br7ayqjve2drn"

[sub_resource type="Resource" id="Resource_d21pq"]
script = ExtResource("7_s5603")
scene = ExtResource("11_diied")
weight = 0.005
metadata/_custom_type_script = "uid://b5htysbr1cbiw"

[sub_resource type="Resource" id="Resource_1vesd"]
script = ExtResource("6_dt5tg")
display_name = "Add Laser"
score_multiplier = 0.8
enemy_to_spawn = SubResource("Resource_d21pq")
metadata/_custom_type_script = "uid://bkeoml7x3rkuu"

[sub_resource type="Resource" id="Resource_kfo7d"]
script = ExtResource("7_s5603")
scene = ExtResource("15_fbdnw")
weight = 0.02
metadata/_custom_type_script = "uid://b5htysbr1cbiw"

[sub_resource type="Resource" id="Resource_4jr5q"]
script = ExtResource("6_dt5tg")
display_name = "Add Smiler"
max_stacks = 3
score_multiplier = 0.6
enemy_to_spawn = SubResource("Resource_kfo7d")
metadata/_custom_type_script = "uid://bkeoml7x3rkuu"

[sub_resource type="Resource" id="Resource_tyfs1"]
script = ExtResource("6_dt5tg")
display_name = "homing bullets"
max_stacks = 3
score_multiplier = -1.5
metadata/_custom_type_script = "uid://bkeoml7x3rkuu"

[sub_resource type="Resource" id="Resource_i7dui"]
script = ExtResource("6_dt5tg")
display_name = "heal between rounds"
max_stacks = 3
score_multiplier = -0.7
metadata/_custom_type_script = "uid://bkeoml7x3rkuu"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_s5603"]
shader = ExtResource("9_dpipn")
shader_parameter/opacity = 0.0
shader_parameter/seed = 0.0
shader_parameter/dissolve_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_d7pyx"]
shader = ExtResource("3_x37ni")
shader_parameter/outerRadius = -0.17
shader_parameter/fadeDistance = 2.106
shader_parameter/MainAlpha = 0.779
shader_parameter/effect_color = Color(0.16, 0.022399997, 0.022399997, 0.7294118)

[node name="Control" type="Control" node_paths=PackedStringArray("mod_list", "score_label")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_yvdn4")
mod_list = NodePath("CanvasLayer/mod_select")
score_label = NodePath("CanvasLayer/ScoreLabel")

[node name="TextureRect" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(1, 1.00206)
texture = SubResource("NoiseTexture2D_d7pyx")
script = ExtResource("1_3b4nm")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -11.49
autoplay = true
bus = &"Music"

[node name="CanvasLayer" type="CanvasLayer" parent="."]
script = ExtResource("4_nel6a")
noise = ExtResource("5_d21pq")

[node name="mod_select" type="VBoxContainer" parent="CanvasLayer" node_paths=PackedStringArray("mult_label")]
material = SubResource("ShaderMaterial_1heoq")
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -39.0
offset_top = -35.5
offset_right = 39.0
offset_bottom = 35.5
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_0i6aa")
script = ExtResource("5_vmbcd")
mod_list = Array[ExtResource("6_dt5tg")]([SubResource("Resource_dpipn"), SubResource("Resource_nel6a"), SubResource("Resource_1vesd"), SubResource("Resource_4jr5q")])
upgrade_list = Array[ExtResource("6_dt5tg")]([SubResource("Resource_tyfs1"), SubResource("Resource_i7dui")])
mult_label = NodePath("../MultiplierLabel")

[node name="ColorRect2" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_s5603")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0, 0, 0, 1)

[node name="ScoreLabel" type="Label" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -122.0
offset_top = 16.0
offset_right = -16.0
offset_bottom = 28.0
grow_horizontal = 0
theme = ExtResource("16_4jr5q")
text = "124523"
horizontal_alignment = 2

[node name="MultiplierLabel" type="Label" parent="CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -121.0
offset_top = 19.0
offset_right = -15.0
offset_bottom = 32.0
grow_horizontal = 0
theme = ExtResource("16_4jr5q")
theme_override_fonts/font = ExtResource("17_fbdnw")
theme_override_font_sizes/font_size = 16
text = "X1.0"
horizontal_alignment = 2

[node name="Panel2" parent="CanvasLayer" instance=ExtResource("19_kfo7d")]
offset_left = 16.0
offset_top = 16.0
offset_right = 116.0
offset_bottom = 35.0

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_d7pyx")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(1, 1.00152)
mouse_filter = 2
